// prisma/schema/auditLog.prisma

model AuditLog {
  id         String          @id @default(cuid())
  tenantId   String
  tenant     Tenant          @relation(fields: [tenantId], references: [id], onDelete: NoAction)
  userId     String
  user       User            @relation(fields: [userId], references: [id], onDelete: NoAction)
  isActive   Boolean         @default(true)
  action     AuditActionType
  entityType EntityType
  entityId   String
  changes    Json
  timestamp  DateTime        @default(now( ))
  ipAddress  String?
  userAgent  String?

  deletedAt DateTime? @db.Timestamp(0)
  deletedByUserId String?

  @@index([action])
  @@index([tenantId, timestamp])
  @@index([userId])
  @@index([entityType, entityId])
  @@map("audit_logs")
}
